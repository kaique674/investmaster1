<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InvestMaster - Elite Autodidata</title>
    <style>
        :root {
            --bg: #0F172A; --card: #1E293B; --text: #F8FAFC;
            --accent: #38BDF8; --success: #22C55E; --danger: #EF4444; --xp: #FACC15;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; display: flex; color: var(--text); overflow-x: hidden; }

        /* Menu Lateral */
        #side-menu {
            width: 280px; height: 100vh; background: var(--card);
            position: fixed; left: -280px; transition: 0.4s; z-index: 1000; padding: 25px 15px; border-right: 1px solid #334155;
        }
        #side-menu.active { left: 0; }
        .profile-area { background: #0F172A; padding: 20px; border-radius: 16px; text-align: center; margin-bottom: 30px; border: 1px solid #334155; }
        .xp-bar { background: #334155; height: 10px; border-radius: 5px; margin-top: 10px; overflow: hidden; }
        #xp-fill { background: var(--xp); height: 100%; width: 0%; transition: 0.5s; box-shadow: 0 0 10px var(--xp); }

        /* Bot√£o Menu */
        #menu-btn { position: fixed; left: 20px; top: 20px; z-index: 500; background: var(--accent); color: var(--bg); padding: 12px 18px; border-radius: 10px; cursor: pointer; font-weight: bold; border: none; }

        /* Container */
        main { flex: 1; display: flex; justify-content: center; padding: 20px; min-height: 100vh; }
        .app-container { background: var(--card); width: 100%; max-width: 650px; padding: 40px; border-radius: 24px; margin-top: 80px; box-shadow: 0 25px 50px rgba(0,0,0,0.5); height: fit-content; }

        /* Cards de Aula */
        .info-box { background: rgba(56, 189, 248, 0.05); border-left: 4px solid var(--accent); padding: 20px; border-radius: 12px; margin: 20px 0; }
        .tag { font-size: 10px; font-weight: bold; text-transform: uppercase; background: var(--accent); color: var(--bg); padding: 2px 6px; border-radius: 4px; margin-bottom: 8px; display: inline-block; }
        
        button.opt { width: 100%; padding: 16px; margin: 8px 0; background: #334155; border: 1px solid #475569; color: white; border-radius: 12px; text-align: left; cursor: pointer; transition: 0.2s; font-size: 15px; }
        button.opt:hover { border-color: var(--accent); background: #3E4C5E; }
        button.opt.selected { border-color: var(--accent); background: rgba(56, 189, 248, 0.2); }

        textarea { width: 100%; height: 100px; background: #0F172A; border: 1px solid #475569; color: white; border-radius: 12px; padding: 15px; margin-top: 10px; resize: none; color: #fff; font-family: inherit; }

        .btn-confirm { width: 100%; padding: 18px; background: var(--success); color: white; border: none; border-radius: 12px; font-weight: bold; margin-top: 20px; cursor: pointer; }
        .hidden { display: none; }
        #overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 999; backdrop-filter: blur(4px); }
        
        .level-card { background: #1e293b; border: 1px solid #334155; padding: 20px; border-radius: 15px; margin-bottom: 10px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: 0.3s; }
        .level-card:hover { border-color: var(--accent); background: #263349; }
    </style>
</head>
<body>

<div id="side-menu">
    <div class="profile-area">
        <div style="font-size: 40px;">üèÖ</div>
        <div id="rank-name" style="color: var(--accent); font-weight: bold; margin-top: 10px;">Iniciante</div>
        <div style="font-size: 12px; margin-top: 5px;">XP Total: <span id="xp-val">0</span></div>
        <div class="xp-bar"><div id="xp-fill"></div></div>
    </div>
    <div onclick="showPage('home')" style="cursor:pointer; padding:15px; border-bottom: 1px solid #334155;">üè† Trilha de N√≠veis</div>
    <div onclick="resetGame()" style="cursor:pointer; padding:15px; color:var(--danger);">‚ö†Ô∏è Resetar Tudo</div>
</div>
<div id="overlay" onclick="toggleMenu()"></div>

<main>
    <button id="menu-btn" onclick="toggleMenu()">‚ò∞ MENU</button>

    <div class="app-container">
        <div id="page-home">
            <h2 style="text-align: center; color: var(--accent); margin-bottom: 30px;">Academia de Investimentos</h2>
            <div id="level-list"></div>
        </div>

        <div id="page-game" class="hidden">
            <div style="display:flex; justify-content: space-between; align-items: center;">
                <span id="game-title" style="font-weight: bold; color: var(--accent);"></span>
                <span id="game-step" style="font-size: 12px; opacity: 0.7;"></span>
            </div>
            
            <div class="info-box">
                <span class="tag">Conceito T√©cnico</span>
                <div id="txt-tech" style="font-size: 13px; margin-bottom: 12px; opacity: 0.9; line-height: 1.5;"></div>
                <span class="tag" style="background: var(--success);">Explica√ß√£o</span>
                <div id="txt-real" style="font-size: 14px; font-weight: 400; line-height: 1.5;"></div>
            </div>

            <p id="game-q" style="font-weight: bold; margin: 25px 0 15px 0; font-size: 16px;"></p>
            
            <div id="options-area"></div>
            <div id="open-area" class="hidden">
                <textarea id="open-answer" placeholder="Escreva sua explica√ß√£o aqui..."></textarea>
            </div>

            <button id="btn-next" class="btn-confirm hidden" onclick="handleNext()">Confirmar Resposta</button>
            
            <div id="study-tip" style="margin-top: 25px; font-size: 12px; text-align: center;">
                <a id="study-link" href="#" target="_blank" style="color: var(--accent); text-decoration: none; border-bottom: 1px solid var(--accent);">üìö Consultar documenta√ß√£o oficial</a>
            </div>
        </div>

        <div id="page-res" class="hidden" style="text-align: center;">
            <div id="res-body"></div>
        </div>
    </div>
</main>

<script>
    const db = [
        {
            name: "M√≥dulo 1: Renda Fixa",
            questions: [
                {
                    type: "multiple", title: "CDB",
                    tech: "O Certificado de Dep√≥sito Banc√°rio √© um t√≠tulo de renda fixa emitido por institui√ß√µes financeiras para captar recursos destinados ao financiamento de suas atividades.",
                    real: "Nesta modalidade, o investidor disponibiliza capital para o banco por um per√≠odo determinado em troca de uma remunera√ß√£o baseada em juros.",
                    q: "Ao adquirir um t√≠tulo de CDB, qual √© a posi√ß√£o jur√≠dica do investidor em rela√ß√£o √† institui√ß√£o financeira?",
                    o: ["Credor", "S√≥cio Minorit√°rio", "Avalista", "Benefici√°rio do Tesouro"],
                    c: "Credor", link: "https://www.tesourodireto.com.br"
                },
                {
                    type: "multiple", title: "Liquidez",
                    tech: "Liquidez √© a facilidade com que um ativo financeiro pode ser convertido em caixa imediato sem perda significativa de valor de mercado.",
                    real: "Diferentes ativos possuem diferentes prazos de convers√£o, variando de disponibilidade imediata (D+0) at√© prazos de meses ou anos.",
                    q: "Um ativo com baixa liquidez apresenta qual caracter√≠stica principal?",
                    o: ["Dificuldade de convers√£o r√°pida em dinheiro", "Risco zero de perda de capital", "Garantia autom√°tica do Governo", "Isen√ß√£o total de impostos"],
                    c: "Dificuldade de convers√£o r√°pida em dinheiro", link: "https://www.b3.com.br"
                },
                {
                    type: "multiple", title: "FGC",
                    tech: "O Fundo Garantidor de Cr√©ditos √© uma entidade privada sem fins lucrativos que administra mecanismos de prote√ß√£o a titulares de cr√©ditos contra institui√ß√µes financeiras.",
                    real: "O fundo assegura o pagamento de dep√≥sitos em caso de interven√ß√£o ou liquida√ß√£o extrajudicial da institui√ß√£o emissora do t√≠tulo.",
                    q: "Qual o limite m√°ximo de cobertura do FGC por CPF ou CNPJ dentro de um mesmo conglomerado financeiro?",
                    o: ["R$ 250.000,00", "R$ 500.000,00", "R$ 100.000,00", "R$ 1.000.000,00"],
                    c: "R$ 250.000,00", link: "https://www.fgc.org.br"
                },
                {
                    type: "open", title: "Dissertativa: Renda Fixa",
                    tech: "A estrutura da Renda Fixa baseia-se na previsibilidade de regras de remunera√ß√£o.",
                    real: "Utilizando os conceitos de emiss√£o banc√°ria e prote√ß√£o ao investidor, descreva a l√≥gica do CDB.",
                    q: "Explique o funcionamento de um CDB e mencione o papel do FGC na seguran√ßa deste investimento:",
                    keys: ["emprestar", "banco", "juros", "fgc", "garantia"], link: "https://www.b3.com.br"
                }
            ]
        },
        {
            name: "M√≥dulo 2: Mercado de Capitais",
            questions: [
                {
                    type: "multiple", title: "A√ß√µes",
                    tech: "A√ß√µes s√£o t√≠tulos nominativos negoci√°veis que representam a menor unidade do capital social de uma sociedade an√¥nima.",
                    real: "A propriedade de uma a√ß√£o confere ao investidor direitos e obriga√ß√µes proporcionais √† sua participa√ß√£o no capital da companhia.",
                    q: "Ao investir em a√ß√µes, o investidor passa a ser caracterizado como:",
                    o: ["Acionista/S√≥cio", "Credor preferencial", "Detentor de d√≠vida p√∫blica", "Garante do passivo laboral"],
                    c: "Acionista/S√≥cio", link: "https://www.b3.com.br"
                },
                {
                    type: "multiple", title: "Dividendos",
                    tech: "Dividendos representam a parcela do lucro l√≠quido de uma companhia distribu√≠da aos seus acionistas em dinheiro.",
                    real: "A distribui√ß√£o √© decidida em assembleia e ocorre ap√≥s o encerramento do exerc√≠cio social, respeitando o estatuto da empresa.",
                    q: "Qual a origem do capital utilizado para o pagamento de dividendos?",
                    o: ["Lucro l√≠quido da empresa", "Empr√©stimos externos", "Taxa de corretagem", "Emiss√£o de novas d√≠vidas"],
                    c: "Lucro l√≠quido da empresa", link: "https://www.b3.com.br"
                },
                {
                    type: "multiple", title: "FIIs",
                    tech: "Os Fundos de Investimento Imobili√°rio re√∫nem recursos para aplica√ß√£o em ativos do setor imobili√°rio, sejam eles f√≠sicos (tijolo) ou t√≠tulos (papel).",
                    real: "A receita gerada pelos ativos do fundo (como loca√ß√µes) √© distribu√≠da periodicamente aos cotistas de acordo com sua participa√ß√£o.",
                    q: "Como se chama a remunera√ß√£o peri√≥dica recebida pelo investidor de FIIs proveniente de alugu√©is?",
                    o: ["Proventos/Rendimentos", "Juros sobre capital pr√≥prio", "Spread banc√°rio", "√Ågio de mercado"],
                    c: "Proventos/Rendimentos", link: "https://www.b3.com.br"
                },
                {
                    type: "open", title: "Dissertativa: Renda Vari√°vel",
                    tech: "A Renda Vari√°vel n√£o garante o retorno do capital inicial e depende do desempenho do ativo.",
                    real: "Discorra sobre como um investidor pode obter lucro ao investir em a√ß√µes de empresas.",
                    q: "Quais s√£o as principais formas de rentabiliza√ß√£o no mercado de a√ß√µes?",
                    keys: ["valoriza√ß√£o", "dividendos", "lucro", "pre√ßo", "venda"], link: "https://www.b3.com.br"
                }
            ]
        },
        {
            name: "M√≥dulo 3: Tesouro e Estrat√©gia",
            questions: [
                {
                    type: "multiple", title: "T√≠tulos P√∫blicos",
                    tech: "T√≠tulos da d√≠vida p√∫blica federal s√£o instrumentos de capta√ß√£o de recursos para o financiamento das atividades do Estado.",
                    real: "S√£o considerados os ativos de menor risco de cr√©dito de um pa√≠s, pois possuem a garantia soberana da Uni√£o.",
                    q: "Quem √© o garantidor final dos t√≠tulos negociados no Tesouro Direto?",
                    o: ["Tesouro Nacional", "Banco Central", "Bancos de Varejo", "FGC"],
                    c: "Tesouro Nacional", link: "https://www.tesourodireto.com.br"
                },
                {
                    type: "multiple", title: "IPCA",
                    tech: "O √çndice Nacional de Pre√ßos ao Consumidor Amplo mede a varia√ß√£o de pre√ßos de uma cesta de produtos e servi√ßos consumida pelas fam√≠lias.",
                    real: "T√≠tulos atrelados a este √≠ndice visam proporcionar rendimento acima da varia√ß√£o do custo de vida.",
                    q: "O que o investidor busca mitigar ao escolher um t√≠tulo indexado ao IPCA?",
                    o: ["Perda do poder de compra (Infla√ß√£o)", "Risco de liquidez", "Oscila√ß√£o do d√≥lar", "Queda da bolsa de valores"],
                    c: "Perda do poder de compra (Infla√ß√£o)", link: "https://www.tesourodireto.com.br"
                },
                {
                    type: "multiple", title: "Marca√ß√£o a Mercado",
                    tech: "Marca√ß√£o a mercado √© o m√©todo de avalia√ß√£o de ativos pelo seu pre√ßo de liquida√ß√£o atual no mercado secund√°rio.",
                    real: "O pre√ßo do t√≠tulo oscila inversamente √† taxa de juros: se as taxas sobem, o pre√ßo do t√≠tulo cai; se as taxas caem, o pre√ßo sobe.",
                    q: "Em qual cen√°rio a venda antecipada de um t√≠tulo prefixado resultaria em lucro por marca√ß√£o a mercado?",
                    o: ["Queda das taxas de juros", "Alta das taxas de juros", "Manuten√ß√£o da Selic", "Aumento da infla√ß√£o"],
                    c: "Queda das taxas de juros", link: "https://www.tesourodireto.com.br"
                },
                {
                    type: "open", title: "Dissertativa: Estrat√©gia",
                    tech: "A diversifica√ß√£o √© uma t√©cnica de gest√£o de risco que combina ativos com diferentes correla√ß√µes.",
                    real: "Explique a import√¢ncia de manter t√≠tulos p√∫blicos e privados em uma carteira de investimentos.",
                    q: "Por que um investidor deve diversificar sua carteira entre diferentes ativos e indexadores?",
                    keys: ["risco", "diversificar", "seguran√ßa", "equil√≠brio", "prote√ß√£o"], link: "https://www.b3.com.br"
                }
            ]
        }
    ];

    let xp = parseInt(localStorage.getItem('invest_xp_v3')) || 0;
    let curLvl = 0; let curStep = 0; let selectedAns = null;
    const audio = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(f1, f2) {
        const osc = audio.createOscillator(); const g = audio.createGain();
        osc.connect(g); g.connect(audio.destination);
        osc.frequency.setValueAtTime(f1, audio.currentTime);
        osc.frequency.exponentialRampToValueAtTime(f2, audio.currentTime + 0.2);
        osc.start(); g.gain.exponentialRampToValueAtTime(0.0001, audio.currentTime + 0.2); osc.stop(audio.currentTime + 0.2);
    }

    function toggleMenu() {
        document.getElementById('side-menu').classList.toggle('active');
        document.getElementById('overlay').style.display = document.getElementById('side-menu').classList.contains('active') ? 'block' : 'none';
    }

    function updateUI() {
        document.getElementById('xp-val').innerText = xp;
        document.getElementById('xp-fill').style.width = Math.min(xp/15, 100) + "%";
        let rank = "Iniciante"; if(xp > 300) rank = "Investidor"; if(xp > 800) rank = "Estrategista Senior";
        document.getElementById('rank-name').innerText = rank;
        localStorage.setItem('invest_xp_v3', xp);
    }

    function showPage(p) {
        ['page-home', 'page-game', 'page-res'].forEach(id => document.getElementById(id).classList.add('hidden'));
        document.getElementById('page-' + p).classList.remove('hidden');
        if(p === 'home') renderLevels();
    }

    function renderLevels() {
        const list = document.getElementById('level-list'); list.innerHTML = "";
        db.forEach((lvl, i) => {
            const card = document.createElement('div'); card.className = "level-card";
            card.innerHTML = `<span>${lvl.name}</span> <span>Estudar ‚Üí</span>`;
            card.onclick = () => { curLvl = i; curStep = 0; showPage('game'); renderStep(); };
            list.appendChild(card);
        });
    }

    function renderStep() {
        const s = db[curLvl].questions[curStep];
        document.getElementById('game-title').innerText = s.title;
        document.getElementById('game-step').innerText = `${curStep + 1} / ${db[curLvl].questions.length}`;
        document.getElementById('txt-tech').innerText = s.tech;
        document.getElementById('txt-real').innerText = s.real;
        document.getElementById('game-q').innerText = s.q;
        document.getElementById('study-link').href = s.link;
        
        const optArea = document.getElementById('options-area');
        const openArea = document.getElementById('open-area');
        optArea.innerHTML = ""; optArea.classList.add('hidden'); openArea.classList.add('hidden');
        document.getElementById('btn-next').classList.add('hidden');

        if(s.type === 'multiple') {
            optArea.classList.remove('hidden');
            [...s.o].sort(() => Math.random() - 0.5).forEach(txt => {
                const b = document.createElement('button'); b.className = "opt"; b.innerText = txt;
                b.onclick = () => { selectedAns = txt; Array.from(optArea.children).forEach(c => c.classList.remove('selected')); b.classList.add('selected'); document.getElementById('btn-next').classList.remove('hidden'); };
                optArea.appendChild(b);
            });
        } else {
            openArea.classList.remove('hidden'); document.getElementById('btn-next').classList.remove('hidden');
            document.getElementById('open-answer').value = "";
        }
    }

    function handleNext() {
        const s = db[curLvl].questions[curStep];
        let win = false;
        if(s.type === 'multiple') win = (selectedAns === s.c);
        else {
            const val = document.getElementById('open-answer').value.toLowerCase();
            win = s.keys.filter(k => val.includes(k)).length >= 2;
        }

        if(win) {
            playSound(440, 880); xp += 50; updateUI(); curStep++;
            if(curStep < db[curLvl].questions.length) renderStep();
            else { 
                showPage('res'); 
                document.getElementById('res-body').innerHTML = `<h2 style="color:var(--success)">M√≥dulo Completo!</h2><p>Voc√™ demonstrou dom√≠nio sobre os conceitos de ${db[curLvl].name}.</p><button class="btn-confirm" onclick="showPage('home')">Pr√≥ximo M√≥dulo</button>`; 
            }
        } else {
            playSound(220, 110); 
            alert("A resposta n√£o condiz com os conceitos apresentados. Revise o material t√©cnico.");
        }
    }

    function resetGame() { if(confirm("Deseja apagar seu progresso?")) { localStorage.clear(); location.reload(); } }
    updateUI(); renderLevels();
</script>
</body>
</html>
